<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Costos de C치maras de Seguridad V2.0</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
        }
        h1, h2 {
            color: #333;
        }
        #container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            width: 100%;
            max-width: 1400px;
        }
        #svg-container {
            border: 1px solid #ccc;
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex-basis: 70%;
            min-width: 700px;
        }
        #info-container {
            flex-basis: 25%;
            min-width: 300px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        tfoot td {
            font-weight: bold;
        }
        .building { fill: #ff9800; stroke: #c66900; stroke-width: 1; }
        .patio { fill: #9e9e9e; stroke: #707070; stroke-width: 1; }
        .cancha { fill: #bdbdbd; stroke: #8d8d8d; stroke-width: 1; }
        .cooperativa { fill: #4caf50; stroke: #388e3c; stroke-width: 1; }
        .bodeguita { fill: #ff9800; stroke: #c66900; opacity: 0.7;}
        .unbuilt { fill: #fafafa; }
        .perimeter { fill: none; stroke: #333; stroke-width: 2; }
        .text-label { font-size: 12px; font-family: sans-serif; fill: #000; }
        .dvr-label { font-size: 10px; font-weight: bold; }
        .camera-icon { font-size: 20px; cursor: grab; }
        .camera-label { font-size: 14px; font-weight: bold; fill: #000; }
        .vision-cone { fill: #03a9f4; fill-opacity: 0.4; stroke: #0288d1; stroke-width: 1; }
    </style>
</head>
<body>
    <h1>Simulador de C치maras - Primaria Frida Kahlo (V2.0)</h1>
    <div id="container">
        <div id="svg-container">
            <svg id="plano-escuela" width="100%" viewBox="0 0 1000 650">
                <!-- Per칤metro Corregido (Basado en foto satelital) -->
                <polygon class="perimeter" points="150,50 900,150 800,600 100,500 150,50" />

                <!-- Edificios y 츼reas (Ajustados al nuevo per칤metro) -->
                <rect x="550" y="200" width="247" height="119" class="building" />
                <text x="610" y="250" class="text-label">Edificio de aulas y</text>
                <text x="610" y="265" class="text-label">oficina del director</text>
                <text x="570" y="270" class="dvr-label">DVR</text>

                <rect x="500" y="380" width="255" height="111" class="building" />
                <text x="560" y="420" class="text-label">Edificio de aulas y</text>
                <text x="560" y="435" class="text-label">oficina de la secretaria</text>
                <text x="650" y="440" class="dvr-label">DVR</text>

                <rect x="350" y="220" width="150" height="120" class="patio" />
                <text x="400" y="280" class="text-label">Patios</text>

                <rect x="250" y="350" width="180" height="100" class="cancha" />
                <text x="280" y="390" class="text-label">Cancha con</text>
                <text x="280" y="405" class="text-label">techumbre</text>

                <rect x="150" y="400" width="60" height="40" class="bodeguita" />
                <text x="155" y="425" class="text-label">Bodeguita</text>

                <rect x="850" y="160" width="40" height="40" class="cooperativa" />
                <text x="860" y="215" class="text-label">Acceso</text>
                
                <rect x="760" y="500" width="30" height="40" class="cooperativa"/>
                <text x="750" y="555" class="text-label">Cooperativa</text>

                <!-- Grupo para renderizar c치maras con JS -->
                <g id="cameras-group"></g>
            </svg>
        </div>
        <div id="info-container">
            <h2>Estimaci칩n de Presupuesto</h2>
            <h3>Escenario: 6 C치maras Al치mbricas</h3>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Costo (MXN)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Kit de 6 C치maras (DVR, HDD 1TB)</td>
                        <td>$6,500</td>
                    </tr>
                    <tr>
                        <td>Cable Adicional (105 mts)</td>
                        <td>$859</td>
                    </tr>
                    <tr>
                        <td>Conectores (para 6 c치maras)</td>
                        <td>$600</td>
                    </tr>
                    <tr>
                        <td>Fuente de Poder Centralizada</td>
                        <td>$850</td>
                    </tr>
                    <tr>
                        <td>Instalaci칩n (6 c치maras @ $750 c/u)</td>
                        <td>$4,500</td>
                    </tr>
                    <tr>
                        <td>Configuraci칩n Inicial (Red y App)</td>
                        <td>$1,000</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td>TOTAL ESTIMADO</td>
                        <td>$14,309</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cameras = [
                { id: 1, x: 860, y: 180, angle: 180 }, // Acceso Principal
                { id: 2, x: 150, y: 70, angle: 45 },  // Esquina superior izquierda
                { id: 3, x: 100, y: 480, angle: 0 },   // Per칤metro izquierdo (calle)
                { id: 4, x: 525, y: 180, angle: 135 }, // V칠rtice entre edificios y per칤metro superior
                { id: 5, x: 880, y: 380, angle: 225 }, // Per칤metro derecho (calle)
                { id: 6, x: 780, y: 580, angle: 315 }  // Esquina inferior derecha
            ];

            const svg = document.getElementById('plano-escuela');
            const group = document.getElementById('cameras-group');
            const visionAngle = 110; // 110 grados
            const visionRadius = 200; // 200 unidades SVG ~ 20 mts

            // Funci칩n para convertir de grados a radianes
            const toRadians = (degrees) => degrees * Math.PI / 180;

            cameras.forEach(cam => {
                // Crear el grupo para cada c치mara
                const camGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g' );

                // Crear el cono de visi칩n
                const cone = document.createElementNS('http://www.w3.org/2000/svg', 'path' );
                const startAngle = toRadians(cam.angle - visionAngle / 2);
                const endAngle = toRadians(cam.angle + visionAngle / 2);

                const x1 = cam.x + visionRadius * Math.cos(startAngle);
                const y1 = cam.y + visionRadius * Math.sin(startAngle);
                const x2 = cam.x + visionRadius * Math.cos(endAngle);
                const y2 = cam.y + visionRadius * Math.sin(endAngle);

                const d = `M ${cam.x} ${cam.y} L ${x1} ${y1} A ${visionRadius} ${visionRadius} 0 0 1 ${x2} ${y2} Z`;
                cone.setAttribute('d', d);
                cone.setAttribute('class', 'vision-cone');
                camGroup.appendChild(cone);

                // Crear el icono de la c치mara
                const icon = document.createElementNS('http://www.w3.org/2000/svg', 'text' );
                icon.setAttribute('x', cam.x);
                icon.setAttribute('y', cam.y);
                icon.setAttribute('class', 'camera-icon');
                icon.setAttribute('text-anchor', 'middle');
                icon.setAttribute('dominant-baseline', 'middle');
                icon.textContent = '游꿘';
                camGroup.appendChild(icon);

                // Crear la etiqueta con el n칰mero
                const label = document.createElementNS('http://www.w3.org/2000/svg', 'text' );
                label.setAttribute('x', cam.x + 15);
                label.setAttribute('y', cam.y - 15);
                label.setAttribute('class', 'camera-label');
                label.textContent = cam.id;
                camGroup.appendChild(label);
                
                group.appendChild(camGroup);
            });
        });
    </script>
</body>
</html>

